## Лаба 2. Установить ELK и подключить данные из Kafka. Решение.

​ Прежде всего, обратите внимание, что [x-pack](https://www.elastic.co/products/x-pack) должен быть установлен на каждой ноде, иначе может не запустится либо кибана, либо логстэш. 

Решение лабораторной очень проста и заключается в одном единственном конфиге (logstash.conf), который указан ниже.

```
input {
    kafka {
        bootstrap_servers => '35.189.125.142:6667'
        topics => ['divolte3']
    }
}

output {
    elasticsearch {
        hosts => ['0.0.0.0:9200']
        index => 'test.user.de2'
    }
}
```

Он должен располагаться в следующей директории `/etc/logstash/conf.d/` . Logstash, как правило, сразу подхватывает конфиг, если таковой появляется. Если же это не произошло, то может просто перезапустить его следующей командой  `sudo -i service logstash restart`

Заходим в Kibana по 5601 порту и добавляем новый индекс. Предварительно не забудьте включить divolte и покликать по сайту, чтобы завелся индекс и на него начали падать сообщения из Кафки. 

<img src="https://i.imgur.com/SK0lkoy.png">

Заходим в Discover, открываем нужный индекс и наблюдаем за визуалиацией логов. Лаба решена!